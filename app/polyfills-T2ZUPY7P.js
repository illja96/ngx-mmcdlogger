(function(t){let e=t.performance;function r(A){e&&e.mark&&e.mark(A)}function n(A,i){e&&e.measure&&e.measure(A,i)}r("Zone");let c=t.__Zone_symbol_prefix||"__zone_symbol__";function l(A){return c+A}let p=t[l("forceDuplicateZoneCheck")]===!0;if(t.Zone){if(p||typeof t.Zone.__symbol__!="function")throw new Error("Zone already loaded.");return t.Zone}let oe=class oe{static assertZonePatched(){if(t.Promise!==ie.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let i=oe.current;for(;i.parent;)i=i.parent;return i}static get current(){return z.zone}static get currentTask(){return ne}static __load_patch(i,s,o=!1){if(ie.hasOwnProperty(i)){if(!o&&p)throw Error("Already loaded patch: "+i)}else if(!t["__Zone_disable_"+i]){let k="Zone:"+i;r(k),ie[i]=s(t,oe,W),n(k,k)}}get parent(){return this._parent}get name(){return this._name}constructor(i,s){this._parent=i,this._name=s?s.name||"unnamed":"<root>",this._properties=s&&s.properties||{},this._zoneDelegate=new v(this,this._parent&&this._parent._zoneDelegate,s)}get(i){let s=this.getZoneWith(i);if(s)return s._properties[i]}getZoneWith(i){let s=this;for(;s;){if(s._properties.hasOwnProperty(i))return s;s=s._parent}return null}fork(i){if(!i)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,i)}wrap(i,s){if(typeof i!="function")throw new Error("Expecting function got: "+i);let o=this._zoneDelegate.intercept(this,i,s),k=this;return function(){return k.runGuarded(o,this,arguments,s)}}run(i,s,o,k){z={parent:z,zone:this};try{return this._zoneDelegate.invoke(this,i,s,o,k)}finally{z=z.parent}}runGuarded(i,s=null,o,k){z={parent:z,zone:this};try{try{return this._zoneDelegate.invoke(this,i,s,o,k)}catch(H){if(this._zoneDelegate.handleError(this,H))throw H}}finally{z=z.parent}}runTask(i,s,o){if(i.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(i.zone||Y).name+"; Execution: "+this.name+")");if(i.state===x&&(i.type===J||i.type===S))return;let k=i.state!=T;k&&i._transitionTo(T,M),i.runCount++;let H=ne;ne=i,z={parent:z,zone:this};try{i.type==S&&i.data&&!i.data.isPeriodic&&(i.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,i,s,o)}catch(f){if(this._zoneDelegate.handleError(this,f))throw f}}finally{i.state!==x&&i.state!==d&&(i.type==J||i.data&&i.data.isPeriodic?k&&i._transitionTo(M,T):(i.runCount=0,this._updateTaskCount(i,-1),k&&i._transitionTo(x,T,x))),z=z.parent,ne=H}}scheduleTask(i){if(i.zone&&i.zone!==this){let o=this;for(;o;){if(o===i.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${i.zone.name}`);o=o.parent}}i._transitionTo(G,x);let s=[];i._zoneDelegates=s,i._zone=this;try{i=this._zoneDelegate.scheduleTask(this,i)}catch(o){throw i._transitionTo(d,G,x),this._zoneDelegate.handleError(this,o),o}return i._zoneDelegates===s&&this._updateTaskCount(i,1),i.state==G&&i._transitionTo(M,G),i}scheduleMicroTask(i,s,o,k){return this.scheduleTask(new E(N,i,s,o,k,void 0))}scheduleMacroTask(i,s,o,k,H){return this.scheduleTask(new E(S,i,s,o,k,H))}scheduleEventTask(i,s,o,k,H){return this.scheduleTask(new E(J,i,s,o,k,H))}cancelTask(i){if(i.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(i.zone||Y).name+"; Execution: "+this.name+")");if(!(i.state!==M&&i.state!==T)){i._transitionTo(U,M,T);try{this._zoneDelegate.cancelTask(this,i)}catch(s){throw i._transitionTo(d,U),this._zoneDelegate.handleError(this,s),s}return this._updateTaskCount(i,-1),i._transitionTo(x,U),i.runCount=0,i}}_updateTaskCount(i,s){let o=i._zoneDelegates;s==-1&&(i._zoneDelegates=null);for(let k=0;k<o.length;k++)o[k]._updateTaskCount(i.type,s)}};oe.__symbol__=l;let _=oe,b={name:"",onHasTask:(A,i,s,o)=>A.hasTask(s,o),onScheduleTask:(A,i,s,o)=>A.scheduleTask(s,o),onInvokeTask:(A,i,s,o,k,H)=>A.invokeTask(s,o,k,H),onCancelTask:(A,i,s,o)=>A.cancelTask(s,o)};class v{constructor(i,s,o){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=i,this._parentDelegate=s,this._forkZS=o&&(o&&o.onFork?o:s._forkZS),this._forkDlgt=o&&(o.onFork?s:s._forkDlgt),this._forkCurrZone=o&&(o.onFork?this.zone:s._forkCurrZone),this._interceptZS=o&&(o.onIntercept?o:s._interceptZS),this._interceptDlgt=o&&(o.onIntercept?s:s._interceptDlgt),this._interceptCurrZone=o&&(o.onIntercept?this.zone:s._interceptCurrZone),this._invokeZS=o&&(o.onInvoke?o:s._invokeZS),this._invokeDlgt=o&&(o.onInvoke?s:s._invokeDlgt),this._invokeCurrZone=o&&(o.onInvoke?this.zone:s._invokeCurrZone),this._handleErrorZS=o&&(o.onHandleError?o:s._handleErrorZS),this._handleErrorDlgt=o&&(o.onHandleError?s:s._handleErrorDlgt),this._handleErrorCurrZone=o&&(o.onHandleError?this.zone:s._handleErrorCurrZone),this._scheduleTaskZS=o&&(o.onScheduleTask?o:s._scheduleTaskZS),this._scheduleTaskDlgt=o&&(o.onScheduleTask?s:s._scheduleTaskDlgt),this._scheduleTaskCurrZone=o&&(o.onScheduleTask?this.zone:s._scheduleTaskCurrZone),this._invokeTaskZS=o&&(o.onInvokeTask?o:s._invokeTaskZS),this._invokeTaskDlgt=o&&(o.onInvokeTask?s:s._invokeTaskDlgt),this._invokeTaskCurrZone=o&&(o.onInvokeTask?this.zone:s._invokeTaskCurrZone),this._cancelTaskZS=o&&(o.onCancelTask?o:s._cancelTaskZS),this._cancelTaskDlgt=o&&(o.onCancelTask?s:s._cancelTaskDlgt),this._cancelTaskCurrZone=o&&(o.onCancelTask?this.zone:s._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let k=o&&o.onHasTask,H=s&&s._hasTaskZS;(k||H)&&(this._hasTaskZS=k?o:b,this._hasTaskDlgt=s,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=i,o.onScheduleTask||(this._scheduleTaskZS=b,this._scheduleTaskDlgt=s,this._scheduleTaskCurrZone=this.zone),o.onInvokeTask||(this._invokeTaskZS=b,this._invokeTaskDlgt=s,this._invokeTaskCurrZone=this.zone),o.onCancelTask||(this._cancelTaskZS=b,this._cancelTaskDlgt=s,this._cancelTaskCurrZone=this.zone))}fork(i,s){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,i,s):new _(i,s)}intercept(i,s,o){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,i,s,o):s}invoke(i,s,o,k,H){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,i,s,o,k,H):s.apply(o,k)}handleError(i,s){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,i,s):!0}scheduleTask(i,s){let o=s;if(this._scheduleTaskZS)this._hasTaskZS&&o._zoneDelegates.push(this._hasTaskDlgtOwner),o=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,i,s),o||(o=s);else if(s.scheduleFn)s.scheduleFn(s);else if(s.type==N)P(s);else throw new Error("Task is missing scheduleFn.");return o}invokeTask(i,s,o,k){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,i,s,o,k):s.callback.apply(o,k)}cancelTask(i,s){let o;if(this._cancelTaskZS)o=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,i,s);else{if(!s.cancelFn)throw Error("Task is not cancelable");o=s.cancelFn(s)}return o}hasTask(i,s){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,i,s)}catch(o){this.handleError(i,o)}}_updateTaskCount(i,s){let o=this._taskCounts,k=o[i],H=o[i]=k+s;if(H<0)throw new Error("More tasks executed then were scheduled.");if(k==0||H==0){let f={microTask:o.microTask>0,macroTask:o.macroTask>0,eventTask:o.eventTask>0,change:i};this.hasTask(this.zone,f)}}}class E{constructor(i,s,o,k,H,f){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=i,this.source=s,this.data=k,this.scheduleFn=H,this.cancelFn=f,!o)throw new Error("callback is not defined");this.callback=o;let u=this;i===J&&k&&k.useG?this.invoke=E.invokeTask:this.invoke=function(){return E.invokeTask.call(t,u,this,arguments)}}static invokeTask(i,s,o){i||(i=this),ee++;try{return i.runCount++,i.zone.runTask(i,s,o)}finally{ee==1&&g(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(x,G)}_transitionTo(i,s,o){if(this._state===s||this._state===o)this._state=i,i==x&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${i}', expecting state '${s}'${o?" or '"+o+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let Z=l("setTimeout"),C=l("Promise"),D=l("then"),V=[],L=!1,K;function q(A){if(K||t[C]&&(K=t[C].resolve(0)),K){let i=K[D];i||(i=K.then),i.call(K,A)}else t[Z](A,0)}function P(A){ee===0&&V.length===0&&q(g),A&&V.push(A)}function g(){if(!L){for(L=!0;V.length;){let A=V;V=[];for(let i=0;i<A.length;i++){let s=A[i];try{s.zone.runTask(s,null,null)}catch(o){W.onUnhandledError(o)}}}W.microtaskDrainDone(),L=!1}}let Y={name:"NO ZONE"},x="notScheduled",G="scheduling",M="scheduled",T="running",U="canceling",d="unknown",N="microTask",S="macroTask",J="eventTask",ie={},W={symbol:l,currentZoneFrame:()=>z,onUnhandledError:F,microtaskDrainDone:F,scheduleMicroTask:P,showUncaughtError:()=>!_[l("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:F,patchMethod:()=>F,bindArguments:()=>[],patchThen:()=>F,patchMacroTask:()=>F,patchEventPrototype:()=>F,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>F,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>F,wrapWithCurrentZone:()=>F,filterProperties:()=>[],attachOriginToPatched:()=>F,_redefineProperty:()=>F,patchCallbacks:()=>F,nativeScheduleMicroTask:q},z={parent:null,zone:new _(null,null)},ne=null,ee=0;function F(){}return n("Zone","Zone"),t.Zone=_})(globalThis);var me=Object.getOwnPropertyDescriptor,Ae=Object.defineProperty,Le=Object.getPrototypeOf,Et=Object.create,mt=Array.prototype.slice,Be="addEventListener",xe="removeEventListener",De=Zone.__symbol__(Be),Ne=Zone.__symbol__(xe),ae="true",ce="false",ye=Zone.__symbol__("");function Ue(t,e){return Zone.current.wrap(t,e)}function je(t,e,r,n,c){return Zone.current.scheduleMacroTask(t,e,r,n,c)}var B=Zone.__symbol__,we=typeof window<"u",ge=we?window:void 0,X=we&&ge||globalThis,yt="removeAttribute";function $e(t,e){for(let r=t.length-1;r>=0;r--)typeof t[r]=="function"&&(t[r]=Ue(t[r],e+"_"+r));return t}function vt(t,e){let r=t.constructor.name;for(let n=0;n<e.length;n++){let c=e[n],l=t[c];if(l){let p=me(t,c);if(!rt(p))continue;t[c]=(_=>{let b=function(){return _.apply(this,$e(arguments,r+"."+c))};return le(b,_),b})(l)}}}function rt(t){return t?t.writable===!1?!1:!(typeof t.get=="function"&&typeof t.set>"u"):!0}var it=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Pe=!("nw"in X)&&typeof X.process<"u"&&{}.toString.call(X.process)==="[object process]",He=!Pe&&!it&&!!(we&&ge.HTMLElement),ot=typeof X.process<"u"&&{}.toString.call(X.process)==="[object process]"&&!it&&!!(we&&ge.HTMLElement),Se={},Qe=function(t){if(t=t||X.event,!t)return;let e=Se[t.type];e||(e=Se[t.type]=B("ON_PROPERTY"+t.type));let r=this||t.target||X,n=r[e],c;if(He&&r===ge&&t.type==="error"){let l=t;c=n&&n.call(this,l.message,l.filename,l.lineno,l.colno,l.error),c===!0&&t.preventDefault()}else c=n&&n.apply(this,arguments),c!=null&&!c&&t.preventDefault();return c};function et(t,e,r){let n=me(t,e);if(!n&&r&&me(r,e)&&(n={enumerable:!0,configurable:!0}),!n||!n.configurable)return;let c=B("on"+e+"patched");if(t.hasOwnProperty(c)&&t[c])return;delete n.writable,delete n.value;let l=n.get,p=n.set,_=e.slice(2),b=Se[_];b||(b=Se[_]=B("ON_PROPERTY"+_)),n.set=function(v){let E=this;if(!E&&t===X&&(E=X),!E)return;typeof E[b]=="function"&&E.removeEventListener(_,Qe),p&&p.call(E,null),E[b]=v,typeof v=="function"&&E.addEventListener(_,Qe,!1)},n.get=function(){let v=this;if(!v&&t===X&&(v=X),!v)return null;let E=v[b];if(E)return E;if(l){let Z=l.call(this);if(Z)return n.set.call(this,Z),typeof v[yt]=="function"&&v.removeAttribute(e),Z}return null},Ae(t,e,n),t[c]=!0}function st(t,e,r){if(e)for(let n=0;n<e.length;n++)et(t,"on"+e[n],r);else{let n=[];for(let c in t)c.slice(0,2)=="on"&&n.push(c);for(let c=0;c<n.length;c++)et(t,n[c],r)}}var re=B("originalInstance");function ve(t){let e=X[t];if(!e)return;X[B(t)]=e,X[t]=function(){let c=$e(arguments,t);switch(c.length){case 0:this[re]=new e;break;case 1:this[re]=new e(c[0]);break;case 2:this[re]=new e(c[0],c[1]);break;case 3:this[re]=new e(c[0],c[1],c[2]);break;case 4:this[re]=new e(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},le(X[t],e);let r=new e(function(){}),n;for(n in r)t==="XMLHttpRequest"&&n==="responseBlob"||function(c){typeof r[c]=="function"?X[t].prototype[c]=function(){return this[re][c].apply(this[re],arguments)}:Ae(X[t].prototype,c,{set:function(l){typeof l=="function"?(this[re][c]=Ue(l,t+"."+c),le(this[re][c],l)):this[re][c]=l},get:function(){return this[re][c]}})}(n);for(n in e)n!=="prototype"&&e.hasOwnProperty(n)&&(X[t][n]=e[n])}function ue(t,e,r){let n=t;for(;n&&!n.hasOwnProperty(e);)n=Le(n);!n&&t[e]&&(n=t);let c=B(e),l=null;if(n&&(!(l=n[c])||!n.hasOwnProperty(c))){l=n[c]=n[e];let p=n&&me(n,e);if(rt(p)){let _=r(l,c,e);n[e]=function(){return _(this,arguments)},le(n[e],l)}}return l}function kt(t,e,r){let n=null;function c(l){let p=l.data;return p.args[p.cbIdx]=function(){l.invoke.apply(this,arguments)},n.apply(p.target,p.args),l}n=ue(t,e,l=>function(p,_){let b=r(p,_);return b.cbIdx>=0&&typeof _[b.cbIdx]=="function"?je(b.name,_[b.cbIdx],b,c):l.apply(p,_)})}function le(t,e){t[B("OriginalDelegate")]=e}var tt=!1,Ze=!1;function bt(){try{let t=ge.navigator.userAgent;if(t.indexOf("MSIE ")!==-1||t.indexOf("Trident/")!==-1)return!0}catch{}return!1}function St(){if(tt)return Ze;tt=!0;try{let t=ge.navigator.userAgent;(t.indexOf("MSIE ")!==-1||t.indexOf("Trident/")!==-1||t.indexOf("Edge/")!==-1)&&(Ze=!0)}catch{}return Ze}Zone.__load_patch("ZoneAwarePromise",(t,e,r)=>{let n=Object.getOwnPropertyDescriptor,c=Object.defineProperty;function l(f){if(f&&f.toString===Object.prototype.toString){let u=f.constructor&&f.constructor.name;return(u||"")+": "+JSON.stringify(f)}return f?f.toString():Object.prototype.toString.call(f)}let p=r.symbol,_=[],b=t[p("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,v=p("Promise"),E=p("then"),Z="__creationTrace__";r.onUnhandledError=f=>{if(r.showUncaughtError()){let u=f&&f.rejection;u?console.error("Unhandled Promise rejection:",u instanceof Error?u.message:u,"; Zone:",f.zone.name,"; Task:",f.task&&f.task.source,"; Value:",u,u instanceof Error?u.stack:void 0):console.error(f)}},r.microtaskDrainDone=()=>{for(;_.length;){let f=_.shift();try{f.zone.runGuarded(()=>{throw f.throwOriginal?f.rejection:f})}catch(u){D(u)}}};let C=p("unhandledPromiseRejectionHandler");function D(f){r.onUnhandledError(f);try{let u=e[C];typeof u=="function"&&u.call(this,f)}catch{}}function V(f){return f&&f.then}function L(f){return f}function K(f){return i.reject(f)}let q=p("state"),P=p("value"),g=p("finally"),Y=p("parentPromiseValue"),x=p("parentPromiseState"),G="Promise.then",M=null,T=!0,U=!1,d=0;function N(f,u){return a=>{try{W(f,u,a)}catch(h){W(f,!1,h)}}}let S=function(){let f=!1;return function(a){return function(){f||(f=!0,a.apply(null,arguments))}}},J="Promise resolved with itself",ie=p("currentTaskTrace");function W(f,u,a){let h=S();if(f===a)throw new TypeError(J);if(f[q]===M){let y=null;try{(typeof a=="object"||typeof a=="function")&&(y=a&&a.then)}catch(w){return h(()=>{W(f,!1,w)})(),f}if(u!==U&&a instanceof i&&a.hasOwnProperty(q)&&a.hasOwnProperty(P)&&a[q]!==M)ne(a),W(f,a[q],a[P]);else if(u!==U&&typeof y=="function")try{y.call(a,h(N(f,u)),h(N(f,!1)))}catch(w){h(()=>{W(f,!1,w)})()}else{f[q]=u;let w=f[P];if(f[P]=a,f[g]===g&&u===T&&(f[q]=f[x],f[P]=f[Y]),u===U&&a instanceof Error){let m=e.currentTask&&e.currentTask.data&&e.currentTask.data[Z];m&&c(a,ie,{configurable:!0,enumerable:!1,writable:!0,value:m})}for(let m=0;m<w.length;)ee(f,w[m++],w[m++],w[m++],w[m++]);if(w.length==0&&u==U){f[q]=d;let m=a;try{throw new Error("Uncaught (in promise): "+l(a)+(a&&a.stack?`
`+a.stack:""))}catch(I){m=I}b&&(m.throwOriginal=!0),m.rejection=a,m.promise=f,m.zone=e.current,m.task=e.currentTask,_.push(m),r.scheduleMicroTask()}}}return f}let z=p("rejectionHandledHandler");function ne(f){if(f[q]===d){try{let u=e[z];u&&typeof u=="function"&&u.call(this,{rejection:f[P],promise:f})}catch{}f[q]=U;for(let u=0;u<_.length;u++)f===_[u].promise&&_.splice(u,1)}}function ee(f,u,a,h,y){ne(f);let w=f[q],m=w?typeof h=="function"?h:L:typeof y=="function"?y:K;u.scheduleMicroTask(G,()=>{try{let I=f[P],O=!!a&&g===a[g];O&&(a[Y]=I,a[x]=w);let R=u.run(m,void 0,O&&m!==K&&m!==L?[]:[I]);W(a,!0,R)}catch(I){W(a,!1,I)}},a)}let F="function ZoneAwarePromise() { [native code] }",oe=function(){},A=t.AggregateError;class i{static toString(){return F}static resolve(u){return u instanceof i?u:W(new this(null),T,u)}static reject(u){return W(new this(null),U,u)}static withResolvers(){let u={};return u.promise=new i((a,h)=>{u.resolve=a,u.reject=h}),u}static any(u){if(!u||typeof u[Symbol.iterator]!="function")return Promise.reject(new A([],"All promises were rejected"));let a=[],h=0;try{for(let m of u)h++,a.push(i.resolve(m))}catch{return Promise.reject(new A([],"All promises were rejected"))}if(h===0)return Promise.reject(new A([],"All promises were rejected"));let y=!1,w=[];return new i((m,I)=>{for(let O=0;O<a.length;O++)a[O].then(R=>{y||(y=!0,m(R))},R=>{w.push(R),h--,h===0&&(y=!0,I(new A(w,"All promises were rejected")))})})}static race(u){let a,h,y=new this((I,O)=>{a=I,h=O});function w(I){a(I)}function m(I){h(I)}for(let I of u)V(I)||(I=this.resolve(I)),I.then(w,m);return y}static all(u){return i.allWithCallback(u)}static allSettled(u){return(this&&this.prototype instanceof i?this:i).allWithCallback(u,{thenCallback:h=>({status:"fulfilled",value:h}),errorCallback:h=>({status:"rejected",reason:h})})}static allWithCallback(u,a){let h,y,w=new this((R,j)=>{h=R,y=j}),m=2,I=0,O=[];for(let R of u){V(R)||(R=this.resolve(R));let j=I;try{R.then($=>{O[j]=a?a.thenCallback($):$,m--,m===0&&h(O)},$=>{a?(O[j]=a.errorCallback($),m--,m===0&&h(O)):y($)})}catch($){y($)}m++,I++}return m-=2,m===0&&h(O),w}constructor(u){let a=this;if(!(a instanceof i))throw new Error("Must be an instanceof Promise.");a[q]=M,a[P]=[];try{let h=S();u&&u(h(N(a,T)),h(N(a,U)))}catch(h){W(a,!1,h)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return i}then(u,a){let h=this.constructor?.[Symbol.species];(!h||typeof h!="function")&&(h=this.constructor||i);let y=new h(oe),w=e.current;return this[q]==M?this[P].push(w,y,u,a):ee(this,w,y,u,a),y}catch(u){return this.then(null,u)}finally(u){let a=this.constructor?.[Symbol.species];(!a||typeof a!="function")&&(a=i);let h=new a(oe);h[g]=g;let y=e.current;return this[q]==M?this[P].push(y,h,u,u):ee(this,y,h,u,u),h}}i.resolve=i.resolve,i.reject=i.reject,i.race=i.race,i.all=i.all;let s=t[v]=t.Promise;t.Promise=i;let o=p("thenPatched");function k(f){let u=f.prototype,a=n(u,"then");if(a&&(a.writable===!1||!a.configurable))return;let h=u.then;u[E]=h,f.prototype.then=function(y,w){return new i((I,O)=>{h.call(this,I,O)}).then(y,w)},f[o]=!0}r.patchThen=k;function H(f){return function(u,a){let h=f.apply(u,a);if(h instanceof i)return h;let y=h.constructor;return y[o]||k(y),h}}return s&&(k(s),ue(t,"fetch",f=>H(f))),Promise[e.__symbol__("uncaughtPromiseErrors")]=_,i});Zone.__load_patch("toString",t=>{let e=Function.prototype.toString,r=B("OriginalDelegate"),n=B("Promise"),c=B("Error"),l=function(){if(typeof this=="function"){let v=this[r];if(v)return typeof v=="function"?e.call(v):Object.prototype.toString.call(v);if(this===Promise){let E=t[n];if(E)return e.call(E)}if(this===Error){let E=t[c];if(E)return e.call(E)}}return e.call(this)};l[r]=e,Function.prototype.toString=l;let p=Object.prototype.toString,_="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?_:p.call(this)}});var _e=!1;if(typeof window<"u")try{let t=Object.defineProperty({},"passive",{get:function(){_e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch{_e=!1}var wt={useG:!0},te={},at={},ct=new RegExp("^"+ye+"(\\w+)(true|false)$"),lt=B("propagationStopped");function ut(t,e){let r=(e?e(t):t)+ce,n=(e?e(t):t)+ae,c=ye+r,l=ye+n;te[t]={},te[t][ce]=c,te[t][ae]=l}function Pt(t,e,r,n){let c=n&&n.add||Be,l=n&&n.rm||xe,p=n&&n.listeners||"eventListeners",_=n&&n.rmAll||"removeAllListeners",b=B(c),v="."+c+":",E="prependListener",Z="."+E+":",C=function(P,g,Y){if(P.isRemoved)return;let x=P.callback;typeof x=="object"&&x.handleEvent&&(P.callback=T=>x.handleEvent(T),P.originalDelegate=x);let G;try{P.invoke(P,g,[Y])}catch(T){G=T}let M=P.options;if(M&&typeof M=="object"&&M.once){let T=P.originalDelegate?P.originalDelegate:P.callback;g[l].call(g,Y.type,T,M)}return G};function D(P,g,Y){if(g=g||t.event,!g)return;let x=P||g.target||t,G=x[te[g.type][Y?ae:ce]];if(G){let M=[];if(G.length===1){let T=C(G[0],x,g);T&&M.push(T)}else{let T=G.slice();for(let U=0;U<T.length&&!(g&&g[lt]===!0);U++){let d=C(T[U],x,g);d&&M.push(d)}}if(M.length===1)throw M[0];for(let T=0;T<M.length;T++){let U=M[T];e.nativeScheduleMicroTask(()=>{throw U})}}}let V=function(P){return D(this,P,!1)},L=function(P){return D(this,P,!0)};function K(P,g){if(!P)return!1;let Y=!0;g&&g.useG!==void 0&&(Y=g.useG);let x=g&&g.vh,G=!0;g&&g.chkDup!==void 0&&(G=g.chkDup);let M=!1;g&&g.rt!==void 0&&(M=g.rt);let T=P;for(;T&&!T.hasOwnProperty(c);)T=Le(T);if(!T&&P[c]&&(T=P),!T||T[b])return!1;let U=g&&g.eventNameToString,d={},N=T[b]=T[c],S=T[B(l)]=T[l],J=T[B(p)]=T[p],ie=T[B(_)]=T[_],W;g&&g.prepend&&(W=T[B(g.prepend)]=T[g.prepend]);function z(a,h){return!_e&&typeof a=="object"&&a?!!a.capture:!_e||!h?a:typeof a=="boolean"?{capture:a,passive:!0}:a?typeof a=="object"&&a.passive!==!1?{...a,passive:!0}:a:{passive:!0}}let ne=function(a){if(!d.isExisting)return N.call(d.target,d.eventName,d.capture?L:V,d.options)},ee=function(a){if(!a.isRemoved){let h=te[a.eventName],y;h&&(y=h[a.capture?ae:ce]);let w=y&&a.target[y];if(w){for(let m=0;m<w.length;m++)if(w[m]===a){w.splice(m,1),a.isRemoved=!0,w.length===0&&(a.allRemoved=!0,a.target[y]=null);break}}}if(a.allRemoved)return S.call(a.target,a.eventName,a.capture?L:V,a.options)},F=function(a){return N.call(d.target,d.eventName,a.invoke,d.options)},oe=function(a){return W.call(d.target,d.eventName,a.invoke,d.options)},A=function(a){return S.call(a.target,a.eventName,a.invoke,a.options)},i=Y?ne:F,s=Y?ee:A,o=function(a,h){let y=typeof h;return y==="function"&&a.callback===h||y==="object"&&a.originalDelegate===h},k=g&&g.diff?g.diff:o,H=Zone[B("UNPATCHED_EVENTS")],f=t[B("PASSIVE_EVENTS")],u=function(a,h,y,w,m=!1,I=!1){return function(){let O=this||t,R=arguments[0];g&&g.transferEventName&&(R=g.transferEventName(R));let j=arguments[1];if(!j)return a.apply(this,arguments);if(Pe&&R==="uncaughtException")return a.apply(this,arguments);let $=!1;if(typeof j!="function"){if(!j.handleEvent)return a.apply(this,arguments);$=!0}if(x&&!x(a,j,O,arguments))return;let fe=_e&&!!f&&f.indexOf(R)!==-1,Q=z(arguments[2],fe),Te=Q&&typeof Q=="object"&&Q.signal&&typeof Q.signal=="object"?Q.signal:void 0;if(Te?.aborted)return;if(H){for(let he=0;he<H.length;he++)if(R===H[he])return fe?a.call(O,R,j,Q):a.apply(this,arguments)}let Re=Q?typeof Q=="boolean"?!0:Q.capture:!1,We=Q&&typeof Q=="object"?Q.once:!1,Tt=Zone.current,Ce=te[R];Ce||(ut(R,U),Ce=te[R]);let Xe=Ce[Re?ae:ce],de=O[Xe],Ye=!1;if(de){if(Ye=!0,G){for(let he=0;he<de.length;he++)if(k(de[he],j))return}}else de=O[Xe]=[];let ke,Ke=O.constructor.name,Je=at[Ke];Je&&(ke=Je[R]),ke||(ke=Ke+h+(U?U(R):R)),d.options=Q,We&&(d.options.once=!1),d.target=O,d.capture=Re,d.eventName=R,d.isExisting=Ye;let Ee=Y?wt:void 0;Ee&&(Ee.taskData=d),Te&&(d.options.signal=void 0);let se=Tt.scheduleEventTask(ke,j,Ee,y,w);if(Te&&(d.options.signal=Te,a.call(Te,"abort",()=>{se.zone.cancelTask(se)},{once:!0})),d.target=null,Ee&&(Ee.taskData=null),We&&(Q.once=!0),!_e&&typeof se.options=="boolean"||(se.options=Q),se.target=O,se.capture=Re,se.eventName=R,$&&(se.originalDelegate=j),I?de.unshift(se):de.push(se),m)return O}};return T[c]=u(N,v,i,s,M),W&&(T[E]=u(W,Z,oe,s,M,!0)),T[l]=function(){let a=this||t,h=arguments[0];g&&g.transferEventName&&(h=g.transferEventName(h));let y=arguments[2],w=y?typeof y=="boolean"?!0:y.capture:!1,m=arguments[1];if(!m)return S.apply(this,arguments);if(x&&!x(S,m,a,arguments))return;let I=te[h],O;I&&(O=I[w?ae:ce]);let R=O&&a[O];if(R)for(let j=0;j<R.length;j++){let $=R[j];if(k($,m)){if(R.splice(j,1),$.isRemoved=!0,R.length===0&&($.allRemoved=!0,a[O]=null,typeof h=="string")){let fe=ye+"ON_PROPERTY"+h;a[fe]=null}return $.zone.cancelTask($),M?a:void 0}}return S.apply(this,arguments)},T[p]=function(){let a=this||t,h=arguments[0];g&&g.transferEventName&&(h=g.transferEventName(h));let y=[],w=ft(a,U?U(h):h);for(let m=0;m<w.length;m++){let I=w[m],O=I.originalDelegate?I.originalDelegate:I.callback;y.push(O)}return y},T[_]=function(){let a=this||t,h=arguments[0];if(h){g&&g.transferEventName&&(h=g.transferEventName(h));let y=te[h];if(y){let w=y[ce],m=y[ae],I=a[w],O=a[m];if(I){let R=I.slice();for(let j=0;j<R.length;j++){let $=R[j],fe=$.originalDelegate?$.originalDelegate:$.callback;this[l].call(this,h,fe,$.options)}}if(O){let R=O.slice();for(let j=0;j<R.length;j++){let $=R[j],fe=$.originalDelegate?$.originalDelegate:$.callback;this[l].call(this,h,fe,$.options)}}}}else{let y=Object.keys(a);for(let w=0;w<y.length;w++){let m=y[w],I=ct.exec(m),O=I&&I[1];O&&O!=="removeListener"&&this[_].call(this,O)}this[_].call(this,"removeListener")}if(M)return this},le(T[c],N),le(T[l],S),ie&&le(T[_],ie),J&&le(T[p],J),!0}let q=[];for(let P=0;P<r.length;P++)q[P]=K(r[P],n);return q}function ft(t,e){if(!e){let l=[];for(let p in t){let _=ct.exec(p),b=_&&_[1];if(b&&(!e||b===e)){let v=t[p];if(v)for(let E=0;E<v.length;E++)l.push(v[E])}}return l}let r=te[e];r||(ut(e),r=te[e]);let n=t[r[ce]],c=t[r[ae]];return n?c?n.concat(c):n.slice():c?c.slice():[]}function It(t,e){let r=t.Event;r&&r.prototype&&e.patchMethod(r.prototype,"stopImmediatePropagation",n=>function(c,l){c[lt]=!0,n&&n.apply(c,l)})}function Ot(t,e,r,n,c){let l=Zone.__symbol__(n);if(e[l])return;let p=e[l]=e[n];e[n]=function(_,b,v){return b&&b.prototype&&c.forEach(function(E){let Z=`${r}.${n}::`+E,C=b.prototype;try{if(C.hasOwnProperty(E)){let D=t.ObjectGetOwnPropertyDescriptor(C,E);D&&D.value?(D.value=t.wrapWithCurrentZone(D.value,Z),t._redefineProperty(b.prototype,E,D)):C[E]&&(C[E]=t.wrapWithCurrentZone(C[E],Z))}else C[E]&&(C[E]=t.wrapWithCurrentZone(C[E],Z))}catch{}}),p.call(e,_,b,v)},t.attachOriginToPatched(e[n],p)}function ht(t,e,r){if(!r||r.length===0)return e;let n=r.filter(l=>l.target===t);if(!n||n.length===0)return e;let c=n[0].ignoreProperties;return e.filter(l=>c.indexOf(l)===-1)}function nt(t,e,r,n){if(!t)return;let c=ht(t,e,r);st(t,c,n)}function Me(t){return Object.getOwnPropertyNames(t).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Rt(t,e){if(Pe&&!ot||Zone[t.symbol("patchEvents")])return;let r=e.__Zone_ignore_on_properties,n=[];if(He){let c=window;n=n.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let l=bt()?[{target:c,ignoreProperties:["error"]}]:[];nt(c,Me(c),r&&r.concat(l),Le(c))}n=n.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let c=0;c<n.length;c++){let l=e[n[c]];l&&l.prototype&&nt(l.prototype,Me(l.prototype),r)}}Zone.__load_patch("util",(t,e,r)=>{let n=Me(t);r.patchOnProperties=st,r.patchMethod=ue,r.bindArguments=$e,r.patchMacroTask=kt;let c=e.__symbol__("BLACK_LISTED_EVENTS"),l=e.__symbol__("UNPATCHED_EVENTS");t[l]&&(t[c]=t[l]),t[c]&&(e[c]=e[l]=t[c]),r.patchEventPrototype=It,r.patchEventTarget=Pt,r.isIEOrEdge=St,r.ObjectDefineProperty=Ae,r.ObjectGetOwnPropertyDescriptor=me,r.ObjectCreate=Et,r.ArraySlice=mt,r.patchClass=ve,r.wrapWithCurrentZone=Ue,r.filterProperties=ht,r.attachOriginToPatched=le,r._redefineProperty=Object.defineProperty,r.patchCallbacks=Ot,r.getGlobalObjects=()=>({globalSources:at,zoneSymbolEventNames:te,eventNames:n,isBrowser:He,isMix:ot,isNode:Pe,TRUE_STR:ae,FALSE_STR:ce,ZONE_SYMBOL_PREFIX:ye,ADD_EVENT_LISTENER_STR:Be,REMOVE_EVENT_LISTENER_STR:xe})});function Ct(t,e){e.patchMethod(t,"queueMicrotask",r=>function(n,c){Zone.current.scheduleMicroTask("queueMicrotask",c[0])})}var be=B("zoneTask");function pe(t,e,r,n){let c=null,l=null;e+=n,r+=n;let p={};function _(v){let E=v.data;return E.args[0]=function(){return v.invoke.apply(this,arguments)},E.handleId=c.apply(t,E.args),v}function b(v){return l.call(t,v.data.handleId)}c=ue(t,e,v=>function(E,Z){if(typeof Z[0]=="function"){let C={isPeriodic:n==="Interval",delay:n==="Timeout"||n==="Interval"?Z[1]||0:void 0,args:Z},D=Z[0];Z[0]=function(){try{return D.apply(this,arguments)}finally{C.isPeriodic||(typeof C.handleId=="number"?delete p[C.handleId]:C.handleId&&(C.handleId[be]=null))}};let V=je(e,Z[0],C,_,b);if(!V)return V;let L=V.data.handleId;return typeof L=="number"?p[L]=V:L&&(L[be]=V),L&&L.ref&&L.unref&&typeof L.ref=="function"&&typeof L.unref=="function"&&(V.ref=L.ref.bind(L),V.unref=L.unref.bind(L)),typeof L=="number"||L?L:V}else return v.apply(t,Z)}),l=ue(t,r,v=>function(E,Z){let C=Z[0],D;typeof C=="number"?D=p[C]:(D=C&&C[be],D||(D=C)),D&&typeof D.type=="string"?D.state!=="notScheduled"&&(D.cancelFn&&D.data.isPeriodic||D.runCount===0)&&(typeof C=="number"?delete p[C]:C&&(C[be]=null),D.zone.cancelTask(D)):v.apply(t,Z)})}function Dt(t,e){let{isBrowser:r,isMix:n}=e.getGlobalObjects();if(!r&&!n||!t.customElements||!("customElements"in t))return;let c=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,t.customElements,"customElements","define",c)}function Nt(t,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:r,zoneSymbolEventNames:n,TRUE_STR:c,FALSE_STR:l,ZONE_SYMBOL_PREFIX:p}=e.getGlobalObjects();for(let b=0;b<r.length;b++){let v=r[b],E=v+l,Z=v+c,C=p+E,D=p+Z;n[v]={},n[v][l]=C,n[v][c]=D}let _=t.EventTarget;if(!(!_||!_.prototype))return e.patchEventTarget(t,e,[_&&_.prototype]),!0}function Zt(t,e){e.patchEventPrototype(t,e)}Zone.__load_patch("legacy",t=>{let e=t[Zone.__symbol__("legacyPatch")];e&&e()});Zone.__load_patch("timers",t=>{let e="set",r="clear";pe(t,e,r,"Timeout"),pe(t,e,r,"Interval"),pe(t,e,r,"Immediate")});Zone.__load_patch("requestAnimationFrame",t=>{pe(t,"request","cancel","AnimationFrame"),pe(t,"mozRequest","mozCancel","AnimationFrame"),pe(t,"webkitRequest","webkitCancel","AnimationFrame")});Zone.__load_patch("blocking",(t,e)=>{let r=["alert","prompt","confirm"];for(let n=0;n<r.length;n++){let c=r[n];ue(t,c,(l,p,_)=>function(b,v){return e.current.run(l,t,v,_)})}});Zone.__load_patch("EventTarget",(t,e,r)=>{Zt(t,r),Nt(t,r);let n=t.XMLHttpRequestEventTarget;n&&n.prototype&&r.patchEventTarget(t,r,[n.prototype])});Zone.__load_patch("MutationObserver",(t,e,r)=>{ve("MutationObserver"),ve("WebKitMutationObserver")});Zone.__load_patch("IntersectionObserver",(t,e,r)=>{ve("IntersectionObserver")});Zone.__load_patch("FileReader",(t,e,r)=>{ve("FileReader")});Zone.__load_patch("on_property",(t,e,r)=>{Rt(r,t)});Zone.__load_patch("customElements",(t,e,r)=>{Dt(t,r)});Zone.__load_patch("XHR",(t,e)=>{b(t);let r=B("xhrTask"),n=B("xhrSync"),c=B("xhrListener"),l=B("xhrScheduled"),p=B("xhrURL"),_=B("xhrErrorBeforeScheduled");function b(v){let E=v.XMLHttpRequest;if(!E)return;let Z=E.prototype;function C(d){return d[r]}let D=Z[De],V=Z[Ne];if(!D){let d=v.XMLHttpRequestEventTarget;if(d){let N=d.prototype;D=N[De],V=N[Ne]}}let L="readystatechange",K="scheduled";function q(d){let N=d.data,S=N.target;S[l]=!1,S[_]=!1;let J=S[c];D||(D=S[De],V=S[Ne]),J&&V.call(S,L,J);let ie=S[c]=()=>{if(S.readyState===S.DONE)if(!N.aborted&&S[l]&&d.state===K){let z=S[e.__symbol__("loadfalse")];if(S.status!==0&&z&&z.length>0){let ne=d.invoke;d.invoke=function(){let ee=S[e.__symbol__("loadfalse")];for(let F=0;F<ee.length;F++)ee[F]===d&&ee.splice(F,1);!N.aborted&&d.state===K&&ne.call(d)},z.push(d)}else d.invoke()}else!N.aborted&&S[l]===!1&&(S[_]=!0)};return D.call(S,L,ie),S[r]||(S[r]=d),T.apply(S,N.args),S[l]=!0,d}function P(){}function g(d){let N=d.data;return N.aborted=!0,U.apply(N.target,N.args)}let Y=ue(Z,"open",()=>function(d,N){return d[n]=N[2]==!1,d[p]=N[1],Y.apply(d,N)}),x="XMLHttpRequest.send",G=B("fetchTaskAborting"),M=B("fetchTaskScheduling"),T=ue(Z,"send",()=>function(d,N){if(e.current[M]===!0||d[n])return T.apply(d,N);{let S={target:d,url:d[p],isPeriodic:!1,args:N,aborted:!1},J=je(x,P,S,q,g);d&&d[_]===!0&&!S.aborted&&J.state===K&&J.invoke()}}),U=ue(Z,"abort",()=>function(d,N){let S=C(d);if(S&&typeof S.type=="string"){if(S.cancelFn==null||S.data&&S.data.aborted)return;S.zone.cancelTask(S)}else if(e.current[G]===!0)return U.apply(d,N)})}});Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&vt(t.navigator.geolocation,["getCurrentPosition","watchPosition"])});Zone.__load_patch("PromiseRejectionEvent",(t,e)=>{function r(n){return function(c){ft(t,n).forEach(p=>{let _=t.PromiseRejectionEvent;if(_){let b=new _(n,{promise:c.promise,reason:c.rejection});p.invoke(b)}})}}t.PromiseRejectionEvent&&(e[B("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),e[B("rejectionHandledHandler")]=r("rejectionhandled"))});Zone.__load_patch("queueMicrotask",(t,e,r)=>{Ct(t,r)});var Mt="none";var At=[16,8,7,6,5],Lt=[1,2],Bt=["none","even","odd"],xt=["none","odd","even"],Ut=[1,1.5,2],Ve={protocol:0,usbControlInterfaceClass:2,usbTransferInterfaceClass:10};function dt(t,e){let r=t.configurations[0];for(let n of r.interfaces)if(n.alternates[0].interfaceClass===e)return n;throw new TypeError(`Unable to find interface with class ${e}.`)}function _t(t,e){let r=t.alternates[0];for(let n of r.endpoints)if(n.direction==e)return n;throw new TypeError(`Interface ${t.interfaceNumber} does not have an ${e} endpoint.`)}var ze=class{constructor(e,r,n){this.type="bytes",this.device_=e,this.endpoint_=r,this.onError_=n}pull(e){(async()=>{let r;if(e.desiredSize){let n=e.desiredSize/this.endpoint_.packetSize;r=Math.ceil(n)*this.endpoint_.packetSize}else r=this.endpoint_.packetSize;try{let n=await this.device_.transferIn(this.endpoint_.endpointNumber,r);if(n.status!="ok"&&(e.error(`USB error: ${n.status}`),this.onError_()),n.data?.buffer){let c=new Uint8Array(n.data.buffer,n.data.byteOffset,n.data.byteLength);e.enqueue(c)}}catch(n){e.error(n.toString()),this.onError_()}})()}},Fe=class{constructor(e,r,n){this.device_=e,this.endpoint_=r,this.onError_=n}async write(e,r){try{let n=await this.device_.transferOut(this.endpoint_.endpointNumber,e);n.status!="ok"&&(r.error(n.status),this.onError_())}catch(n){r.error(n.toString()),this.onError_()}}},Ie=class{constructor(e,r){this.polyfillOptions_={...Ve,...r},this.outputSignals_={dataTerminalReady:!1,requestToSend:!1,break:!1},this.device_=e,this.controlInterface_=dt(this.device_,this.polyfillOptions_.usbControlInterfaceClass),this.transferInterface_=dt(this.device_,this.polyfillOptions_.usbTransferInterfaceClass),this.inEndpoint_=_t(this.transferInterface_,"in"),this.outEndpoint_=_t(this.transferInterface_,"out")}get readable(){return!this.readable_&&this.device_.opened&&(this.readable_=new ReadableStream(new ze(this.device_,this.inEndpoint_,()=>{this.readable_=null}),{highWaterMark:this.serialOptions_.bufferSize??255})),this.readable_}get writable(){return!this.writable_&&this.device_.opened&&(this.writable_=new WritableStream(new Fe(this.device_,this.outEndpoint_,()=>{this.writable_=null}),new ByteLengthQueuingStrategy({highWaterMark:this.serialOptions_.bufferSize??255}))),this.writable_}async open(e){this.serialOptions_=e,this.validateOptions();try{await this.device_.open(),this.device_.configuration===null&&await this.device_.selectConfiguration(1),await this.device_.claimInterface(this.controlInterface_.interfaceNumber),this.controlInterface_!==this.transferInterface_&&await this.device_.claimInterface(this.transferInterface_.interfaceNumber),await this.setLineCoding(),await this.setSignals({dataTerminalReady:!0})}catch(r){throw this.device_.opened&&await this.device_.close(),new Error("Error setting up device: "+r.toString())}}async close(){let e=[];this.readable_&&e.push(this.readable_.cancel()),this.writable_&&e.push(this.writable_.abort()),await Promise.all(e),this.readable_=null,this.writable_=null,this.device_.opened&&(await this.setSignals({dataTerminalReady:!1,requestToSend:!1}),await this.device_.close())}async forget(){return this.device_.forget()}getInfo(){return{usbVendorId:this.device_.vendorId,usbProductId:this.device_.productId}}reconfigure(e){return this.serialOptions_={...this.serialOptions_,...e},this.validateOptions(),this.setLineCoding()}async setSignals(e){if(this.outputSignals_={...this.outputSignals_,...e},e.dataTerminalReady!==void 0||e.requestToSend!==void 0){let r=(this.outputSignals_.dataTerminalReady?1:0)|(this.outputSignals_.requestToSend?2:0);await this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:r,index:this.controlInterface_.interfaceNumber})}if(e.break!==void 0){let r=this.outputSignals_.break?65535:0;await this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:35,value:r,index:this.controlInterface_.interfaceNumber})}}validateOptions(){if(!this.isValidBaudRate(this.serialOptions_.baudRate))throw new RangeError("invalid Baud Rate "+this.serialOptions_.baudRate);if(!this.isValidDataBits(this.serialOptions_.dataBits))throw new RangeError("invalid dataBits "+this.serialOptions_.dataBits);if(!this.isValidStopBits(this.serialOptions_.stopBits))throw new RangeError("invalid stopBits "+this.serialOptions_.stopBits);if(!this.isValidParity(this.serialOptions_.parity))throw new RangeError("invalid parity "+this.serialOptions_.parity)}isValidBaudRate(e){return e%1===0}isValidDataBits(e){return typeof e>"u"?!0:At.includes(e)}isValidStopBits(e){return typeof e>"u"?!0:Lt.includes(e)}isValidParity(e){return typeof e>"u"?!0:Bt.includes(e)}async setLineCoding(){let e=new ArrayBuffer(7),r=new DataView(e);if(r.setUint32(0,this.serialOptions_.baudRate,!0),r.setUint8(4,Ut.indexOf(this.serialOptions_.stopBits??1)),r.setUint8(5,xt.indexOf(this.serialOptions_.parity??Mt)),r.setUint8(6,this.serialOptions_.dataBits??8),(await this.device_.controlTransferOut({requestType:"class",recipient:"interface",request:32,value:0,index:this.controlInterface_.interfaceNumber},e)).status!="ok")throw new DOMException("NetworkError","Failed to set line coding.")}},qe=class{async requestPort(e,r){r={...Ve,...r};let n=[];if(e&&e.filters)for(let p of e.filters){let _={classCode:r.usbControlInterfaceClass};p.usbVendorId!==void 0&&(_.vendorId=p.usbVendorId),p.usbProductId!==void 0&&(_.productId=p.usbProductId),n.push(_)}n.length===0&&n.push({classCode:r.usbControlInterfaceClass});let c=await navigator.usb.requestDevice({filters:n});return new Ie(c,r)}async getPorts(e){e={...Ve,...e};let r=await navigator.usb.getDevices(),n=[];return r.forEach(c=>{try{let l=new Ie(c,e);n.push(l)}catch{}}),n}},Vt=new qe;var jt=":";var Ge=class{visitText(e,r){return e.value}visitContainer(e,r){return`[${e.children.map(n=>n.visit(this)).join(", ")}]`}visitIcu(e,r){let n=Object.keys(e.cases).map(c=>`${c} {${e.cases[c].visit(this)}}`);return`{${e.expression}, ${e.type}, ${n.join(", ")}}`}visitTagPlaceholder(e,r){return e.isVoid?`<ph tag name="${e.startName}"/>`:`<ph tag name="${e.startName}">${e.children.map(n=>n.visit(this)).join(", ")}</ph name="${e.closeName}">`}visitPlaceholder(e,r){return e.value?`<ph name="${e.name}">${e.value}</ph>`:`<ph name="${e.name}"/>`}visitIcuPlaceholder(e,r){return`<ph icu name="${e.name}">${e.value.visit(this)}</ph>`}visitBlockPlaceholder(e,r){return`<ph block name="${e.startName}">${e.children.map(n=>n.visit(this)).join(", ")}</ph name="${e.closeName}">`}},Ft=new Ge;var pt;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(pt||(pt={}));function $t(t,e){for(let r=1,n=1;r<t.length;r++,n++)if(e[n]==="\\")n++;else if(t[r]===jt)return r;throw new Error(`Unterminated $localize metadata block in "${e}".`)}var Oe=function(t,...e){if(Oe.translate){let n=Oe.translate(t,e);t=n[0],e=n[1]}let r=gt(t[0],t.raw[0]);for(let n=1;n<t.length;n++)r+=e[n-1]+gt(t[n],t.raw[n]);return r},Ht=":";function gt(t,e){return e.charAt(0)===Ht?t.substring($t(t,e)+1):t}globalThis.$localize=Oe;
